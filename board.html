<!DOCTYPE html> 
<html lanf="en">  
<head>  
    <meta charset='utf-8' />  
    <title>Draggable Sticky Notes Project</title>  

    <link rel="stylesheet" href="css/mystyle.css" />  
    <link rel="stylesheet" href="css/stickynote.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <!--<script type = "text/javascript" src="js/board.js"></script> -->
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
    <script src="jquery.ui.touch-punch.min.js"></script>
    <script src="jquery.pulse.min.js"></script>


</head>  
<body>  
        <h1>Sticky Note Drag</h1>
        
           
            <div class ="container">

                <form id="overlay_form" style="display:none">
                    <input type = "text" name="idText" placeholder ="Enter Work Item ID" required/>
                    <input type = "text" name="noteDescription" placeholder = "Enter Work item Description" />
                    <h2> Choose Colour</h2>
                    <div id="yellowBox"></div>
                        <div id="redBox"></div>
                         <div id="blueBox"></div>
                        <div id="greenBox"></div>
                    <input type="button" value="Create Note" id="createNote" disabled />
                    <input type="button" value="Close" id="close" />
                
                    </form>       
                <div class = "menu">
                      
                    <a href="#" id="newNote">
                        <img src="images/add.png" alt="Add Sticky Note" title="Add a new sticky note" />
                    </a>
                    
                    <input type ="button" id="clearStorage" value = "Clear Local Storage" />
                   <!-- <button id="newNote"> Create New Note </button>-->
                </div>
               
                <div class ="boxheaders">
                    <div id="todo-header"><h1>To Do</h1> </div>
                    <div id="inprogress-header"><h1>In Progress</h1></div>
                    <div id ="done-header"><h1>Done</h1></div>
                </div>
                <div class = "box">
                    <div id="todo">
                    </div>
                    <div id="inprogress">
                    </div>
                    <div id ="done">
                    </div>
                </div>
            </div>


     <script>

    var numNotes = 0;
    var loadNoteNum = 0;
    var r = 0;
    var g = 0;
    var b = 0;
    var color = null;


    $(document).ready(function(e) {

         $( "div #todo" ).droppable({
                drop: function( event, ui ) {
                MoveNote(ui.draggable, $('div #todo'));
              }
           });

         $( "div #inprogress" ).droppable({
                drop: function( event, ui ) {
                MoveNote(ui.draggable, $('div #inprogress'));
              }
           });

      });

    function MoveNote($item,$target)
    {
        var selectedDiv = $target;
        var stickyNote = $('<div class="note "style="background-color: rgb(255,240,70)"  />').appendTo($(selectedDiv));
        var noteId = $item.find('h1:first').appendTo($(stickyNote));
        var noteDesc = $item.find('p:first').appendTo($(stickyNote));
        $item.remove(); 
        $( ".note" ).draggable({ containment: "container", scroll: false});
    }
 
    function addText()
    {

    }
    function NewNote($noteColor)
    {
        var noteId = document.forms[0].idText.value;
        var noteDesc = document.forms[0].noteDescription.value;
        var selectedDiv = $('div #todo');
        var stickynote = $('<div class="note" />').appendTo($(selectedDiv));
        $(stickynote).css('background-colour',$noteColor);
        var textHead = $('<h1 class = "noteHead ">' + noteId + '</h1>').appendTo($(stickynote));
        var textDesc = $('<p class = "noteP ">' + noteDesc + '</p>').appendTo($(stickynote));
        $( ".note" ).draggable({ containment: "container", scroll: false });
        numNotes++;
        localStorage.setItem('numNotes', JSON.stringify(numNotes));
    };

    function redNote()
    {
       if (numNotes < 8)
       {
        var noteId = document.forms[0].idText.value;
        var noteDesc = document.forms[0].noteDescription.value;
        var selectedDiv = $('div #box1').eq(numNotes);
        var stickynote = $('<div class="note "style="background-color: rgb(255,61,61)"  />').appendTo($(selectedDiv));
        var textHead = $('<h1 class = "noteHead ">' + noteId + '</h1>').appendTo($(stickynote));
        var textDesc = $('<p class = "noteP ">' + noteDesc + '</p>').appendTo($(stickynote));
        $( ".note" ).draggable({ containment: ".box #todo", scroll: false });
        numNotes++;
        localStorage.setItem('numNotes', JSON.stringify(numNotes));
        }
    };
    function blueNote()
    {
       if (numNotes < 8)
       {
        var noteId = document.forms[0].idText.value;
        var noteDesc = document.forms[0].noteDescription.value;
        var selectedDiv = $('div #box1').eq(numNotes);
        var stickynote = $('<div class="note "style="background-color: rgb(61,61,255)"  />').appendTo($(selectedDiv));
         var textHead = $('<h1 class = "noteHead ">' + noteId + '</h1>').appendTo($(stickynote));
        var textDesc = $('<p class = "noteP ">' + noteDesc + '</p>').appendTo($(stickynote));
        $( ".note" ).draggable({ containment: ".box #todo", scroll: false });
        numNotes++;
        localStorage.setItem('numNotes', JSON.stringify(numNotes));
        }
    };
    function greenNote()
    {
       if (numNotes < 8)
       {
        var noteId = document.forms[0].idText.value;
        var noteDesc = document.forms[0].noteDescription.value;
        var selectedDiv = $('div #box1').eq(numNotes);
        var stickynote = $('<div class="note "style="background-color: rgb(102,255,51)"  />').appendTo($(selectedDiv));
         var textHead = $('<h1 class = "noteHead ">' + noteId + '</h1>').appendTo($(stickynote));
        var textDesc = $('<p class = "noteP ">' + noteDesc + '</p>').appendTo($(stickynote));
        $( ".note" ).draggable({ containment: ".box #todo", scroll: false });
        numNotes++;
        localStorage.setItem('numNotes', JSON.stringify(numNotes));
        }
    };

    $(document).ready(function() {
       
     //   $('#noteColor').hide();
    });

    $(document).ready(function(e) {
       
        $('#clearStorage').click(function()
        {
            localStorage.clear();
            alert("Local Storage Cleared")
            return false;
        });
    });




    $(document).ready(function()
    {
        //open popup
        $("#newNote").click(function()
        {
            $("#overlay_form").fadeIn(1000);
             positionPopup();
        });

        
    });

    //create yellow note
    $("#yellowBox").click(function()
    {
        NewNote($(this).css("background-color"));
        $("#overlay_form").fadeOut(500);
        return false;
    });
    //create red note
    $("#redBox").click(function()
    {
        NewNote($(this).css("background-color"));
        $("#overlay_form").fadeOut(500);
        return false;
    });
    //create blue note
    $("#blueBox").click(function()
    {
        NewNote($(this).css("background-color"));
        $("#overlay_form").fadeOut(500);
        return false;
    });

    //create green note
    $("#greenBox").click(function()
    {
        NewNote($(this).css("background-color"));
        $("#overlay_form").fadeOut(500);
        return false;
    });


    //create note
    $("#createNote").click(function()
    {
        Note();
        $("#overlay_form").fadeOut(500);
        return false;
    });
     
    //close popup
    $("#close").click(function(){
        $("#overlay_form").fadeOut(500);
    });
    
     
    //position the popup at the center of the page
    function positionPopup(){
    if(!$("#overlay_form").is(':visible')){
    return;
    }
    $("#overlay_form").css({
    left: ($(window).width() - $('#overlay_form').width()) / 2,
    top: ($(window).width() - $('#overlay_form').width()) / 7,
    position:'absolute'
    });
    }
     
    //maintain the popup at center of the page when browser resized
    $(window).bind('resize',positionPopup);








    </script>
            
</body>  
</html>  

