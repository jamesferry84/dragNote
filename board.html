<!DOCTYPE html> 
<html lanf="en">  
<head>  
    <meta charset='utf-8' />  
    <title>Draggable Sticky Notes Project</title>  

    <link rel="stylesheet" href="css/mystyle.css" />  
    <link rel="stylesheet" href="css/stickynote.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <!--<script type = "text/javascript" src="js/board.js"></script> -->
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
    <script src="jquery.ui.touch-punch.min.js"></script>
    <script src="jquery.pulse.min.js"></script>


</head>  
<body>  
        <h1>Sticky Note Drag</h1>
        
           
            <div class ="container">

                <form id="overlay_form" style="display:none">
                    <input type = "text" name="idText" placeholder ="Enter Work Item ID" required/>
                    <input type = "text" name="noteDescription" placeholder = "Enter Work item Description" />
                    <h2> Choose Colour</h2>
                    <div id="yellowBox"></div>
                        <div id="redBox"></div>
                         <div id="blueBox"></div>
                        <div id="greenBox"></div>
                    <input type="button" value="Create Note" id="createNote" disabled />
                    <input type="button" value="Close" id="close" />
                
                    </form>       
                <div class = "menu">
                      
                    <a href="#" id="newNote">
                        <img src="images/add.png" alt="Add Sticky Note" title="Add a new sticky note" />
                    </a>
                    
                    <input type ="button" id="clearStorage" value = "Clear Local Storage" />
                   <!-- <button id="newNote"> Create New Note </button>-->
                </div>
               
                <div class ="boxheaders">
                    <div id="todo-header"><h1>To Do</h1> </div>
                    <div id="inprogress-header"><h1>In Progress</h1></div>
                    <div id ="done-header"><h1>Done</h1></div>
                </div>
                <div class = "box">
                    <div id="todo">
                    </div>
                    <div id="inprogress">
                    </div>
                    <div id ="done">
                    </div>
                </div>
            </div>


     <script>

    var numNotes = 0;
    var loadNoteNum = 0;
    var r = 0;
    var g = 0;
    var b = 0;
    var color = null;


    $(document).ready(function(e) {

         $( "div #todo" ).droppable({
            hoverClass: "ui-state-active",
              drop: function(event, ui) {
               var targetElem = $(this).attr("id");
               $(ui.draggable).clone().appendTo("#todo");
               var d = new Date();
               $('.note #todoDate').html('<p id="todoDate">Date ToDo: ' + d + '</p>');
               $('.note #todoDate').css('display', 'none');
                MoveNote(ui.draggable, $('div #todo'));
              }
           });

         $( "div #inprogress" ).droppable({

             hoverClass: "ui-state-active",
             
              drop: function(event, ui) {
               var targetElem = $(this).attr("id");
              
               $(ui.draggable).clone().appendTo("#inprogress");
                var d = new Date();
               $('.note #inProgressDate').html('<p id="inProgressDate">Date inProgress: ' + d + '</p>');
               $('.note #inProgressDate').css('display', 'none');
              MoveNote(ui.draggable, $('div #inprogress'));
              }

           });
         $( "div #done" ).droppable({

             hoverClass: "ui-state-active",
             
              drop: function(event, ui) {
               var targetElem = $(this).attr("id");
               $(ui.draggable).clone().appendTo("#done");
                var d = new Date();
               $('.note #doneDate').html('<p id="doneDate">Date Done: ' + d + '</p>');
               $('.note #doneDate').css('display', 'none');
                MoveNote(ui.draggable, $('div #done'));
              }

           });


      });

    //function MoveNote($item,$target)
    function MoveNote($item , $target)
    {
       // $item.fadeOut('fast');
        
       $item.remove();
        $( ".note" ).draggable({ containment: "container", revert: "invalid", helper: "clone", scroll: false });
       
    }



 
    function addText()
    {

    }
    function NewNote()
    {
        var d = new Date();
        var noteId = document.forms[0].idText.value;
        var noteDesc = document.forms[0].noteDescription.value;
        var selectedDiv = $('div #todo');
      //  var stickynote = $('<div class="note" />').appendTo($(selectedDiv));
        var stickynote = document.createElement("div");
        $(stickynote).addClass("note");
        stickynote.setAttribute("style", "background-color:" + color);
       // stickynote.style.cssText('background-colour:' + color);
        $(selectedDiv).append($(stickynote));
        var textHead = $('<h1 class = "noteHead ">' + noteId + '</h1>').appendTo($(stickynote));
        var textDesc = $('<p>' + noteDesc + '</p>').appendTo($(stickynote));

        $('.note').append('<p id="todoDate">Date ToDo: ' + d + '</p>');
        $('.note').append('<p id="inProgressDate">Date inProgress: ' + d + '</p>');
        $('.note').append('<p id="doneDate">Date done: ' + d + '</p>');
        $('.note #todoDate').css('display', 'none');
        $('.note #inProgressDate').css('display', 'none');
        $('.note #doneDate').css('display', 'none');
        $( ".note" ).draggable({ containment: "container", revert: "invalid", helper: "clone", scroll: false });
        numNotes++;
        localStorage.setItem('numNotes', JSON.stringify(numNotes));
    };


    $(document).ready(function() {
       
     //   $('#noteColor').hide();
    });

    $(document).ready(function(e) {
       
        $('#clearStorage').click(function()
        {
            localStorage.clear();
            alert("Local Storage Cleared")
            return false;
        });
    });




    $(document).ready(function()
    {
        //open popup
        $("#newNote").click(function()
        {
            $("#overlay_form").fadeIn(1000);
             positionPopup();
        });

        
    });

    //create yellow note
    $("#yellowBox").click(function()
    {
        color = $(this).css("background-color");
        NewNote();
        $("#overlay_form").fadeOut(500);
        return false;
    });
    //create red note
    $("#redBox").click(function()
    {
        color = $(this).css("background-color");
        NewNote();
        $("#overlay_form").fadeOut(500);
        return false;
    });
    //create blue note
    $("#blueBox").click(function()
    {
         color = $(this).css("background-color");
        NewNote();
        $("#overlay_form").fadeOut(500);
        return false;
    });

    //create green note
    $("#greenBox").click(function()
    {
         color = $(this).css("background-color");
        NewNote();
        $("#overlay_form").fadeOut(500);
        return false;
    });


    //create note
    $("#createNote").click(function()
    {
        Note();
        $("#overlay_form").fadeOut(500);
        return false;
    });
     
    //close popup
    $("#close").click(function(){
        $("#overlay_form").fadeOut(500);
    });
    
     
    //position the popup at the center of the page
    function positionPopup(){
    if(!$("#overlay_form").is(':visible')){
    return;
    }
    $("#overlay_form").css({
    left: ($(window).width() - $('#overlay_form').width()) / 2,
    top: ($(window).width() - $('#overlay_form').width()) / 7,
    position:'absolute'
    });
    }
     
    //maintain the popup at center of the page when browser resized
    $(window).bind('resize',positionPopup);








    </script>
            
</body>  
</html>  

